<center><h3>关系数据设计理论</h3></center>

---

> 核心问题：如何设计一个好的数据库？

#### 1. 函数依赖

##### 1.1 函数依赖的定义

+ 函数依赖 Functional Dependencies Fd;
  + 作用在关系上的约束
  + 键的概念的泛化
+ 定义
  + $A_1$ ~ $A_n$上一致，则$B_1$ ~ $B_n$ 也一致
  + 形式记法：$A1A2...An → B1B2...Bn$
+ 关系R满足函数依赖F:
  + R每个实例都能使一个给定的FD为真，则R满足（satisfy）函数依赖f
  + 在R上声明一个约束，不是实例
+ 关系的键
  + 最小的可以决定其他所有属性的集合
  + 主键：
    + 一个关系会有多个键，指定其中一个为主键
+ 超键：
  + 包含键的属性的集合，键的超集
  + 不一定使是最小的

##### 1.2 函数依赖规则

###### 1.2.1 规则：

- 等价 Equivalent：
  - 如果满足 FD S 的关系实例的集合和满足 FD T 的关系实例的集合相同，则 S 和 T 等价
- 推断 Follows：
  - 如果满足 FD T 的所有关系实例也满足 FD S，则 T 可以推断出 S（S follows from T）
- 分解规则 Splitting rule：
  - $A1A2...An → B1B2...Bm$ 等价于 $A1A2...An → Bi，i = 1,2,...,m$
- 组合规则 Combining rule：
  - $A1A2...An → Bi，i = 1,2,...,m$ 等价于 $A1A2...An → B1B2...Bm$

###### 1.2.2 平凡函数依赖：

+ 平凡 trivial：
  + 关系上的一个约束对所有关系实例都成立，且与其他约束无关（重点在与其他约束无关）
+ 平凡函数依赖 trivial's FDs:
  + $A_1A_2...A_n → B_1B_2...B_m (\{B_1,B_2,...,B_m\}\subseteq\{A_1,A_2,...,A_m\})$
  + 每个关系都存在平凡FD：两个元组在属性A1A2...An上取值相同，则他们在这n个属性上任一个子集取值都相同
+ 平凡依赖规则：
  + 若$A1A2...An → B1B2...Bm，则A1A2...An → C1C2...Ck$（C 是 B 的子集而不是 A 的子集）
  + 去掉了平凡依赖，去掉了显而易见的部分

##### 1.3 计算属性的闭包

+ 闭包 closure：
  + $\{A_1,A_2,...,A_n\} 的闭包记作 \{A_1,A_2,...,A_n\}^+$
  + 属性集连同它能函数决定的集合
  + 其实就是做出了闭环，不能再推断出其他依赖
+ A能函数决定B，当且仅当B在A的闭包中







